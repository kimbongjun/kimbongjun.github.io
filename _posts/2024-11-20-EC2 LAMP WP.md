---
layout: post
title: EC2 LAMP Linux2 WP 설치 참고
tags:
  - aws
  - ec2
  - linux
image: "/images/posts/al.png"
categories: [web]
last_modified_at: 2024-11-20
---

#### 언제 사라질지 모르니 보관용으로 기록해둔다....

# 초기세팅

{% highlight markdown %}
sudo yum update -y
{% endhighlight %}

{% highlight markdown %}
sudo amazon-linux-extras install mariadb10.5
# RDS 이용 시 패스
{% endhighlight %}

{% highlight markdown %}
sudo amazon-linux-extras install php8.2
{% endhighlight %}

{% highlight markdown %}
sudo yum install -y httpd
{% endhighlight %}

{% highlight markdown %}
sudo usermod -a -G apache ec2-user
{% endhighlight %}

{% highlight markdown %}
sudo chown -R ec2-user:apache /var/www
{% endhighlight %}

{% highlight markdown %}
sudo chmod 2775 /var/www && find /var/www -type d -exec sudo chmod 2775 {} \;
{% endhighlight %}

{% highlight markdown %}
find /var/www -type f -exec sudo chmod 0664 {} \;
{% endhighlight %}

{% highlight markdown %}
sudo systemctl start mariadb
{% endhighlight %}

{% highlight markdown %}
sudo mysql_secure_installation
{% endhighlight %}

{% highlight markdown %}
sudo yum install -y mod_ssl
{% endhighlight %}

# 워드프레스 설치

{% highlight markdown %}
wget https://wordpress.org/latest.tar.gz
{% endhighlight %}

{% highlight markdown %}
tar -xzf latest.tar.gz
{% endhighlight %}

{% highlight markdown %}
mysql -u root -p

CREATE USER 'wordpress-user'@'localhost' IDENTIFIED BY 'your_strong_password';
CREATE DATABASE `wordpress-db`;
GRANT ALL PRIVILEGES ON `wordpress-db`.* TO "wordpress-user"@"localhost";
# mysql 접근하여 유저, 데이터베이스 생성
FLUSH PRIVILEGES;
exit
{% endhighlight %}

{% highlight markdown %}
cp wordpress/wp-config-sample.php wordpress/wp-config.php
nano wordpress/wp-config.php
# wp-config의 샘플 파일을 카피하여 생성 및 정보 수정
{% endhighlight %}

{% highlight markdown %}
define('AUTH_KEY',         ' #U$$+[RXN8:b^-L 0(WU_+ c+WFkI~c]o]-bHw+)/Aj[wTwSiZ<Qb[mghEXcRh-');
define('SECURE_AUTH_KEY',  'Zsz._P=l/|y.Lq)XjlkwS1y5NJ76E6EJ.AV0pCKZZB,*~*r ?6OP$eJT@;+(ndLg');
define('LOGGED_IN_KEY',    'ju}qwre3V*+8f_zOWf?{LlGsQ]Ye@2Jh^,8x>)Y |;(^[Iw]Pi+LG#A4R?7N`YB3');
define('NONCE_KEY',        'P(g62HeZxEes|LnI^i=H,[XwK9I&[2s|:?0N}VJM%?;v2v]v+;+^9eXUahg@::Cj');
define('AUTH_SALT',        'C$DpB4Hj[JK:?{ql`sRVa:{:7yShy(9A@5wg+`JJVb1fk%_-Bx*M4(qc[Qg%JT!h');
define('SECURE_AUTH_SALT', 'd!uRu#}+q#{f$Z?Z9uFPG.${+S{n~1M&%@~gL>U>NV<zpD-@2-Es7Q1O-bp28EKv');
define('LOGGED_IN_SALT',   ';j{00P*owZf)kVD+FVLn-~ >.|Y%Ug4#I^*LVd9QeZ^&XmK|e(76miC+&W&+^0P/');
define('NONCE_SALT',       '-97r*V/cgxLmp?Zy4zUU4r99QQ_rGs2LTd%P;|_e1tS)8_B/,.6[=UK<J_y9?JWG');
{% endhighlight %}

{% highlight markdown %}
cp -r wordpress/* /var/www/html/
mkdir /var/www/html/blog
cp -r wordpress/* /var/www/html/blog/
{% endhighlight %}

{% highlight markdown %}
sudo vim /etc/httpd/conf/httpd.conf
{% endhighlight %}
`<Directory "/var/www/html">` 내용에서 AllowOverride None을 `AllowOverride All`로 변경

{% highlight markdown %}
sudo yum install php-gd
sudo yum list installed php-gd
{% endhighlight %}


{% highlight markdown %}
sudo chown -R apache /var/www
sudo chgrp -R apache /var/www
sudo chmod 2775 /var/www
find /var/www -type d -exec sudo chmod 2775 {} \;
{% endhighlight %}

[※ 관련 참고 링크](https://docs.aws.amazon.com/ko_kr/linux/al2/ug/hosting-wordpress.html){:target="\_blank"}